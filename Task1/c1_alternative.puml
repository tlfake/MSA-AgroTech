@startuml C1_Alternative_Solution
!define RELATIVE_INCLUDE ../lib
!include ../lib/C4_Context.puml

LAYOUT_WITH_LEGEND()

title Контекстная диаграмма (C1) — Альтернативное решение: Централизованная архитектура\nПлатформа мониторинга свиноводческих ферм

' === Пользователи ===
Person(operator, "Оператор фермы", "Дежурный сотрудник на ферме.\nПолучает уведомления о\nнештатных ситуациях,\nуправляет оборудованием")
Person(manager, "Управляющий / Директор", "Контролирует состояние\nвсех ферм удалённо\nчерез веб-портал")
Person(vet, "Ветеринар", "Отслеживает здоровье\nживотных, получает\nоповещения о болезнях")

' === Разрабатываемая система ===
Enterprise_Boundary(platform, "Платформа мониторинга скота") {

    System(central, "Централизованная платформа\nмониторинга (Cloud)", "Полная обработка данных в облаке:\nвидеоаналитика (AI/ML),\nуправление фермами,\nхранение данных, отчётность,\nAPI для веб/мобильных приложений,\nуправление кормушками/поилками")

    System(farm_gateway, "IoT-шлюз фермы\n(Lightweight Agent)", "Минимальный агент на ферме:\nсбор и буферизация данных\nс камер и датчиков,\nпроксирование команд\nк оборудованию,\nлокальный кэш при потере связи")
}

' === Внешние системы ===
System_Ext(agrotech, "АгроПром Х\n(существующая платформа)", "ERP (1С:Агро), Data Warehouse,\nBI-система, IoT-платформа")

System_Ext(notifications, "Система уведомлений", "SMS-шлюз, Push-уведомления,\nEmail, мессенджеры")

System_Ext(iot_devices, "IoT-оборудование фермы", "Видеокамеры (вкл. ночные),\nдатчики среды, кормушки\nи поилки разных производителей,\nсистемы фильтрации воды")

System_Ext(ai_model, "Нейросетевая модель\n(от партнёров)", "Предобученная модель для\nраспознавания поведения животных,\nподсчёта поголовья,\nоценки состояния здоровья")

System_Ext(cloud_gpu, "Облачная GPU-инфраструктура", "Вычислительные ресурсы\nдля видеоаналитики\nи обработки видеопотоков")

' === Связи пользователей ===
Rel(operator, central, "Получает уведомления,\nуправляет оборудованием", "Веб-портал / мобильное приложение")
Rel(manager, central, "Мониторинг всех ферм,\nотчёты, управление", "Веб-портал / REST API")
Rel(vet, central, "Просмотр состояния\nживотных, уведомления", "Веб-портал / мобильное приложение")

' === Связи между системами ===
Rel(farm_gateway, central, "Передача видеопотоков\nи данных с датчиков,\nполучение команд управления", "VPN / WebSocket / REST API")
Rel(central, agrotech, "Передача бизнес-данных,\nметрик, отчётов", "REST API / ETL")
Rel(central, notifications, "Отправка уведомлений\nвсем пользователям", "SMTP / SMS API / Push")
Rel(farm_gateway, iot_devices, "Сбор данных с камер и датчиков,\nпроксирование команд управления", "RTSP / MQTT / Modbus / REST API")
Rel(central, ai_model, "Запуск видеоаналитики\nна серверных GPU", "Развёрнутая модель (TensorRT / Triton)")
Rel(central, cloud_gpu, "Обработка видеопотоков\nи инференс моделей", "GPU API / gRPC")

@enduml
